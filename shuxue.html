<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-E">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å°å®çš„æ•°å­¦é­”æ³•å±‹ âœ¨ (åˆ†æ­¥)</title>
    <style>
        body {
            font-family: 'Comic Sans MS', 'Chalkboard SE', 'Marker Felt', sans-serif;
            line-height: 1.6;
            margin: 0;
            padding: 20px;
            background-color: #f0f8ff;
            color: #333;
            display: flex;
            flex-direction: column;
            align-items: center;
        }
        .container {
            width: 90%;
            max-width: 700px;
            background-color: #fff;
            padding: 25px;
            border-radius: 15px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.15);
            border: 3px dashed #ffcc80;
        }
        h1 {
            color: #ff6b6b;
            text-align: center;
            font-size: 28px;
            margin-bottom: 20px;
        }
        .input-section {
            display: flex;
            justify-content: space-around;
            align-items: center;
            margin-bottom: 20px;
            padding: 10px;
            background-color: #fff9e6;
            border-radius: 10px;
        }
        .input-group {
            display: flex;
            flex-direction: column;
            align-items: center;
            margin: 0 10px;
        }
        .input-group label {
            font-size: 16px;
            color: #555;
            margin-bottom: 5px;
        }
        .input-group input[type="number"],
        .input-group select {
            padding: 10px;
            border: 2px solid #ffdca8;
            border-radius: 8px;
            font-size: 18px;
            width: 80px;
            text-align: center;
        }
        .button-controls {
            display: flex;
            justify-content: center; /* å±…ä¸­æŒ‰é’® */
            gap: 15px; /* æŒ‰é’®ä¹‹é—´çš„é—´è· */
            margin-top: 20px;
        }
        button {
            background-image: linear-gradient(to bottom, #ffae73, #ff8c42);
            color: white;
            padding: 12px 20px;
            border: none;
            border-radius: 25px;
            cursor: pointer;
            font-size: 18px;
            font-weight: bold;
            min-width: 150px; /* ç»™æŒ‰é’®ä¸€ä¸ªæœ€å°å®½åº¦ */
            box-shadow: 0 3px 5px rgba(0,0,0,0.2);
            transition: transform 0.1s ease;
        }
        button:hover {
            transform: scale(1.05);
        }
        button#nextStepButton {
            background-image: linear-gradient(to bottom, #87CEEB, #4682B4); /* æ·¡è“è‰²æ¸å˜ */
        }
         button#restartButton {
            background-image: linear-gradient(to bottom, #90EE90, #3CB371); /* æ·¡ç»¿è‰²æ¸å˜ */
        }


        .demo-area {
            display: flex;
            justify-content: space-between;
            margin-top: 30px;
            gap: 20px;
        }
        .vertical-form-container {
            flex-basis: 40%;
            padding: 15px;
            background-color: #e6fff0;
            border-radius: 10px;
            box-shadow: inset 0 0 8px rgba(0,0,0,0.1);
            min-height: 200px; /* ç¡®ä¿æœ‰è¶³å¤Ÿé«˜åº¦æ˜¾ç¤ºç«–å¼ */
        }
        .vertical-form table {
            width: 100%;
            border-collapse: collapse;
            font-size: 28px;
            font-weight: bold;
            text-align: right;
        }
        .vertical-form td {
            padding: 8px 12px;
            height: 40px;
        }
        .vertical-form .operator-cell {
            width: 30px;
            text-align: center;
        }
        .vertical-form .line-row td {
            border-bottom: 2px solid #333;
            padding-bottom: 5px;
        }
        .vertical-form .result-row td {
            color: #d9534f;
            height: 45px; /* ç»“æœè¡Œç¨é«˜ä¸€ç‚¹ */
        }
        .vertical-form .carry-digit, .vertical-form .borrow-mark, .vertical-form .temp-digit {
            font-size: 18px;
            color: #ff6b6b;
            position: absolute; /* ä½¿ç”¨ç»å¯¹å®šä½æ–¹ä¾¿æ§åˆ¶ä½ç½® */
            opacity: 0;
            transition: opacity 0.3s ease-in-out;
        }
        .vertical-form .carry-digit { /* è¿›ä½ç‰¹å®šæ ·å¼ */
            transform: translate(10px, -20px); /* è°ƒæ•´è¿›ä½æ•°å­—çš„ä½ç½® */
        }
         .vertical-form .temp-digit { /* ä¸´æ—¶æ ‡è®°æ•°å­—ï¼Œå¦‚é€€ä½åçš„æ–°ä¸ªä½æ•° */
            color: #007bff; /* è“è‰²ä¸´æ—¶æ•°å­— */
            font-weight: normal;
            transform: translate(-5px, -25px); /* è°ƒæ•´ä¸´æ—¶æ•°å­—ä½ç½® */
        }

        .vertical-form .strikethrough {
            text-decoration: line-through;
            color: #aaa;
            position: relative; /* ç¡®ä¿åˆ é™¤çº¿æ­£ç¡®æ˜¾ç¤º */
        }

        .explanation-box {
            flex-basis: 55%;
            padding: 15px;
            background-color: #fff0f5;
            border-radius: 10px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
            min-height: 200px; /* ç¡®ä¿æœ‰è¶³å¤Ÿé«˜åº¦ */
        }
        .explanation-box h3 {
            color: #6a0dad;
            margin-top: 0;
            font-size: 20px;
        }
        .explanation-box p {
            margin: 8px 0;
            font-size: 17px;
            color: #4a4a4a;
        }
        .highlight-step { 
            background-color: #ffffcc;
            padding: 3px;
            border-radius: 3px;
        }
        .emoji {
            font-size: 20px;
            margin-right: 5px;
        }

        /* æ–°å¢çš„CSS for footer-notes */
        .footer-notes {
            margin-top: 30px;
            padding: 20px; 
            background-color: #fff9e6; 
            border-top: 3px dashed #ffcc80; 
            border-radius: 10px; 
            font-size: 15px; 
            color: #555; 
            text-align: left;
        }
        .footer-notes h4 {
            margin-top: 0;
            color: #ff8c42; 
            font-size: 18px;
            margin-bottom: 10px;
        }
        .footer-notes ul {
            list-style-type: none; 
            padding-left: 0;
            margin-top: 5px;
            margin-bottom: 10px;
        }
        .footer-notes li {
            margin-bottom: 8px; 
            padding-left: 25px; 
            position: relative; 
        }
        .footer-notes li::before { 
            content: "ğŸ”¹"; 
            color: #4682B4; 
            position: absolute;
            left: 0;
            font-size: 16px;
        }
        .footer-notes strong {
            color: #ff6b6b; 
        }
        .footer-notes p:last-child { 
            margin-top: 10px;
            font-style: italic;
            color: #666;
        }

    </style>
</head>
<body>
    <div class="container">
        <h1>å°å®çš„æ•°å­¦é­”æ³•å±‹ âœ¨</h1>

        <div class="input-section">
            <div class="input-group">
                <label for="num1">ç¬¬ä¸€ä¸ªæ•°:</label>
                <input type="number" id="num1" min="10" max="99" value="34">
            </div>
            <div class="input-group">
                <label for="operator">ç¬¦å·:</label>
                <select id="operator">
                    <option value="+">+</option>
                    <option value="-">-</option>
                </select>
            </div>
            <div class="input-group">
                <label for="num2">ç¬¬äºŒä¸ªæ•°:</label>
                <input type="number" id="num2" min="1" max="90" value="8">
            </div>
        </div>

        <div class="button-controls">
            <button id="startButton" onclick="startDemonstration()">å¼€å§‹é­”æ³•è®¡ç®— ğŸš€</button>
            <button id="nextStepButton" onclick="displayNextStep()" style="display: none;">ä¸‹ä¸€æ­¥ â¡ï¸</button>
            <button id="restartButton" onclick="restartCalculation()" style="display: none;">é‡æ–°å¼€å§‹ ğŸ”„</button>
        </div>


        <div class="demo-area">
            <div class="vertical-form-container">
                <table class="vertical-form">
                    <thead>
                        <tr>
                            <td style="position: relative;"><span id="carrySpace" class="carry-digit"></span></td>
                            <td style="position: relative;">
                                <span id="vf-num1-tens"></span>
                                <span id="temp-tens-display" class="temp-digit"></span>
                            </td>
                            <td style="position: relative;">
                                <span id="vf-num1-ones"></span>
                                <span id="temp-ones-display" class="temp-digit"></span>
                            </td>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td id="vf-operator" class="operator-cell"></td>
                            <td id="vf-num2-tens"></td>
                            <td id="vf-num2-ones"></td>
                        </tr>
                        <tr class="line-row">
                            <td colspan="3"></td>
                        </tr>
                        <tr class="result-row">
                            <td></td>
                            <td id="vf-result-tens"></td>
                            <td id="vf-result-ones"></td>
                        </tr>
                    </tbody>
                </table>
            </div>
            <div class="explanation-box">
                <h3><span class="emoji">ğŸ’¡</span> è®¡ç®—å°è´´å£«:</h3>
                <div id="explanationText">
                    <p><span class="emoji">ğŸ‘‹</span> å°æœ‹å‹ï¼Œè¾“å…¥æ•°å­—ï¼Œç‚¹å‡»â€œå¼€å§‹é­”æ³•è®¡ç®—â€å§ï¼</p>
                </div>
            </div>
        </div>

        <div class="footer-notes">
            <h4><span class="emoji">ğŸ“–</span> å·¥å…·é€‚ç”¨èŒƒå›´è¯´æ˜ï¼š</h4>
            <p>å°å®ä½ å¥½å‘€ï¼è¿™ä¸ªé­”æ³•è®¡ç®—å™¨å¯ä»¥å¸®ä½ ç»ƒä¹ ä¸‹é¢è¿™äº›ç®—å¼å“¦ï¼š</p>
            <ul>
                <li><strong>ä¸¤ä½æ•° åŠ /å‡ æ•´åæ•°</strong> (æ¯”å¦‚: 34 + 20, 56 - 30)</li>
                <li><strong>ä¸¤ä½æ•° åŠ  ä¸€ä½æ•° (ä¸ªä½ä¸è¿›ä½)</strong> (æ¯”å¦‚: 25 + 3)</li>
                <li><strong>ä¸¤ä½æ•° åŠ  ä¸€ä½æ•° (ä¸ªä½è¦è¿›ä½)</strong> (æ¯”å¦‚: 24 + 8)</li>
                <li><strong>ä¸¤ä½æ•° å‡ ä¸€ä½æ•° (ä¸ªä½ä¸é€€ä½)</strong> (æ¯”å¦‚: 48 - 5)</li>
                <li><strong>ä¸¤ä½æ•° å‡ ä¸€ä½æ•° (ä¸ªä½è¦é€€ä½)</strong> (æ¯”å¦‚: 32 - 6)</li>
            </ul>
            <p>è¾“å…¥æ•°å­—çš„æ—¶å€™ï¼Œè¦çœ‹çœ‹æ˜¯ä¸æ˜¯è¿™äº›ç±»å‹çš„ç®—å¼ï¼Œè¿™æ ·é­”æ³•æ‰èƒ½æˆåŠŸæ–½å±•å“¦ï¼åŠ æ²¹ï¼ğŸ˜‰</p>
        </div>

    </div> <!-- class="container" çš„ç»“æŸæ ‡ç­¾ -->

    <script>
        const num1Input = document.getElementById('num1');
        const operatorSelect = document.getElementById('operator');
        const num2Input = document.getElementById('num2');

        const vfNum1Tens = document.getElementById('vf-num1-tens');
        const vfNum1Ones = document.getElementById('vf-num1-ones');
        const vfOperator = document.getElementById('vf-operator');
        const vfNum2Tens = document.getElementById('vf-num2-tens');
        const vfNum2Ones = document.getElementById('vf-num2-ones');
        const vfResultTens = document.getElementById('vf-result-tens');
        const vfResultOnes = document.getElementById('vf-result-ones');
        
        const carrySpace = document.getElementById('carrySpace');
        const tempTensDisplay = document.getElementById('temp-tens-display'); 
        const tempOnesDisplay = document.getElementById('temp-ones-display'); 

        const explanationText = document.getElementById('explanationText');
        const startButton = document.getElementById('startButton');
        const nextStepButton = document.getElementById('nextStepButton');
        const restartButton = document.getElementById('restartButton');


        let currentStep = 0;
        let steps = [];
        let finalResult = 0;
        let originalNum1TensText, originalNum1OnesText; 

        function clearPreviousMarks() {
            carrySpace.textContent = '';
            carrySpace.style.opacity = 0;
            tempTensDisplay.textContent = '';
            tempTensDisplay.style.opacity = 0;
            tempOnesDisplay.textContent = '';
            tempOnesDisplay.style.opacity = 0;

            vfNum1Tens.classList.remove('strikethrough');
            vfNum1Ones.classList.remove('strikethrough');
            if (originalNum1TensText !== undefined) vfNum1Tens.textContent = originalNum1TensText;
            if (originalNum1OnesText !== undefined) vfNum1Ones.textContent = originalNum1OnesText;

            vfNum1Tens.style.color = '#333';
            vfNum1Ones.style.color = '#333';
            vfNum2Tens.style.color = '#333';
            vfNum2Ones.style.color = '#333';
            vfResultTens.textContent = '';
            vfResultOnes.textContent = '';
        }


        function resetCalculation() {
            clearPreviousMarks();
            vfNum1Tens.textContent = '';
            vfNum1Ones.textContent = '';
            vfOperator.textContent = '';
            vfNum2Tens.textContent = '';
            vfNum2Ones.textContent = '';

            explanationText.innerHTML = '<p><span class="emoji">ğŸ‘‹</span> å°æœ‹å‹ï¼Œè¾“å…¥æ•°å­—ï¼Œç‚¹å‡»â€œå¼€å§‹é­”æ³•è®¡ç®—â€å§ï¼</p>';
            currentStep = 0;
            steps = [];
            originalNum1TensText = undefined;
            originalNum1OnesText = undefined;

            startButton.style.display = 'inline-block';
            nextStepButton.style.display = 'none';
            restartButton.style.display = 'none';
            num1Input.disabled = false;
            operatorSelect.disabled = false;
            num2Input.disabled = false;
        }
        
        function restartCalculation() {
            resetCalculation();
        }


        function displayNextStep() {
            clearPreviousMarks(); 

            if (currentStep < steps.length) {
                const step = steps[currentStep];
                explanationText.innerHTML = step.explanation;
                if (step.action) {
                    if (originalNum1TensText === undefined) originalNum1TensText = vfNum1Tens.textContent;
                    if (originalNum1OnesText === undefined) originalNum1OnesText = vfNum1Ones.textContent;
                    step.action();
                }
                currentStep++;
                if (currentStep === steps.length) { 
                    nextStepButton.textContent = "çœ‹ç»“æœå’¯ ğŸ†";
                }
            } else { 
                vfResultTens.textContent = Math.floor(finalResult / 10) === 0 && finalResult < 10 && finalResult !== 0 ? '' : Math.floor(finalResult / 10);
                vfResultOnes.textContent = finalResult % 10;
                explanationText.innerHTML += `<p><span class="emoji">ğŸ‰</span> ç®—å¥½å•¦ï¼ç­”æ¡ˆæ˜¯ <strong>${finalResult}</strong>ï¼ä½ çœŸæ£’ï¼</p>`;
                nextStepButton.style.display = 'none';
                restartButton.style.display = 'inline-block';
            }
        }

        function startDemonstration() {
            resetCalculation(); 

            const num1 = num1Input.valueAsNumber;
            const operator = operatorSelect.value;
            const num2 = num2Input.valueAsNumber;

            if (isNaN(num1) || isNaN(num2)) {
                explanationText.innerHTML = '<p><span class="emoji">ğŸ¤”</span> å“¦å‘€ï¼Œè¦è¾“å…¥æ•°å­—æ‰èƒ½è®¡ç®—å“¦ï¼</p>';
                return;
            }
            if (num1 < 10 || num1 > 99) {
                explanationText.innerHTML = '<p><span class="emoji">ğŸ˜®</span> ç¬¬ä¸€ä¸ªæ•°è¦æ˜¯ä¸¤ä½æ•°å“¦ (10-99)ï¼</p>';
                return;
            }
            if (!((num2 >= 10 && num2 % 10 === 0 && num2 <= 90) || (num2 >= 1 && num2 < 10))) {
                explanationText.innerHTML = '<p><span class="emoji">ğŸ§</span> ç¬¬äºŒä¸ªæ•°è¦æ˜¯ä¸€ä½æ•° (1-9) æˆ–è€…æ•´åæ•° (10, 20...90) å“¦ï¼</p>';
                return;
            }
             if (operator === '-' && num1 < num2) {
                explanationText.innerHTML = `<p><span class="emoji">ğŸ™…</span> å°å¿ƒï¼${num1} æ¯” ${num2} å°ï¼Œç°åœ¨è¿˜ä¸èƒ½è¿™æ ·å‡å“¦ã€‚</p>`;
                return;
            }


            const n1TensVal = Math.floor(num1 / 10);
            const n1OnesVal = num1 % 10;
            const n2IsTensType = num2 >= 10 && num2 % 10 === 0;
            const n2TensVal = n2IsTensType ? num2 / 10 : 0;
            const n2OnesVal = n2IsTensType ? 0 : num2;

            vfNum1Tens.textContent = n1TensVal;
            originalNum1TensText = n1TensVal.toString(); 
            vfNum1Ones.textContent = n1OnesVal;
            originalNum1OnesText = n1OnesVal.toString(); 

            vfOperator.textContent = operator;
            if (n2IsTensType) {
                vfNum2Tens.textContent = n2TensVal;
                vfNum2Ones.textContent = '0';
            } else {
                vfNum2Tens.textContent = '';
                vfNum2Ones.textContent = n2OnesVal;
            }
            
            steps = []; 

            if (operator === '+') {
                finalResult = num1 + num2;
                if (n2IsTensType) { 
                    steps.push({
                        explanation: `<p><span class="emoji">âœ¨</span> æˆ‘ä»¬æ¥ç®— ${num1} + ${num2}ï¼</p><p><span class="emoji">ğŸ‘‡</span> å…ˆçœ‹ä¸ªä½ï¼š${n1OnesVal} + 0 = ${n1OnesVal}ã€‚æŠŠ ${n1OnesVal} å†™åœ¨ç»“æœçš„ä¸ªä½ä¸Šã€‚</p>`,
                        action: () => { vfResultOnes.textContent = n1OnesVal; vfNum1Ones.style.color = '#ff6b6b'; vfNum2Ones.style.color = '#ff6b6b';}
                    });
                    steps.push({
                        explanation: `<p><span class="emoji">ğŸ‘‰</span> å†çœ‹åä½ï¼š${n1TensVal}ä¸ªå + ${n2TensVal}ä¸ªå = ${n1TensVal + n2TensVal}ä¸ªåã€‚æŠŠ ${n1TensVal + n2TensVal} å†™åœ¨ç»“æœçš„åä½ä¸Šã€‚</p>`,
                        action: () => { vfResultTens.textContent = n1TensVal + n2TensVal; vfNum1Tens.style.color = '#ff6b6b'; vfNum2Tens.style.color = '#ff6b6b';}
                    });
                } else { 
                    steps.push({
                        explanation: `<p><span class="emoji">âœ¨</span> æˆ‘ä»¬æ¥ç®— ${num1} + ${num2}ï¼</p><p><span class="emoji">ğŸ‘‡</span> å…ˆä»ä¸ªä½å¼€å§‹åŠ ï¼š${n1OnesVal} + ${n2OnesVal} = ${n1OnesVal + n2OnesVal}ã€‚</p>`,
                        action: () => { vfNum1Ones.style.color = '#ff6b6b'; vfNum2Ones.style.color = '#ff6b6b'; }
                    });
                    if (n1OnesVal + n2OnesVal >= 10) { 
                        const onesSum = n1OnesVal + n2OnesVal;
                        const resultOnesDigit = onesSum % 10;
                        steps.push({
                            explanation: `<p><span class="emoji">ğŸ˜®</span> å“‡ï¼${onesSum} æ»¡åå•¦ï¼</p><p><span class="emoji">â¡ï¸</span> ä¸ªä½å†™ ${resultOnesDigit}ï¼Œå‘åä½æ‚„æ‚„é€å»ä¸€ä¸ªå°å°çš„ <span style="color:#ff6b6b; font-weight:bold;">1</span>ï¼ (çœ‹ç«–å¼åä½ä¸Šé¢)</p>`,
                            action: () => {
                                vfResultOnes.textContent = resultOnesDigit;
                                carrySpace.textContent = '1';
                                carrySpace.style.opacity = 1;
                            }
                        });
                        steps.push({
                            explanation: `<p><span class="emoji">â•</span> ç°åœ¨çœ‹åä½ï¼šåŸæ¥çš„ ${n1TensVal}ä¸ªåï¼ŒåŠ ä¸Šè¿›æ¥çš„ 1ä¸ªåï¼Œä¸€å…±æ˜¯ ${n1TensVal + 1}ä¸ªåã€‚</p>`,
                            action: () => {
                                vfResultTens.textContent = n1TensVal + 1;
                                vfNum1Tens.style.color = '#ff6b6b';
                                carrySpace.style.color = '#ff6b6b'; 
                            }
                        });
                    } else { 
                         steps.push({
                            explanation: `<p><span class="emoji">ğŸ˜Š</span> ä¸ªä½æ˜¯ ${n1OnesVal + n2OnesVal}ï¼Œæ²¡æœ‰æ»¡åï¼Œç›´æ¥å†™åœ¨ç»“æœçš„ä¸ªä½ä¸Šï¼</p>`,
                            action: () => { vfResultOnes.textContent = n1OnesVal + n2OnesVal; }
                        });
                        steps.push({
                            explanation: `<p><span class="emoji">â¡ï¸</span> åä½æ²¡æœ‰å˜åŒ–ï¼Œè¿˜æ˜¯ ${n1TensVal}ä¸ªåã€‚æŠŠ ${n1TensVal} å†™åœ¨ç»“æœçš„åä½ä¸Šã€‚</p>`,
                            action: () => { vfResultTens.textContent = n1TensVal; vfNum1Tens.style.color = '#ff6b6b';}
                        });
                    }
                }
            } else { 
                finalResult = num1 - num2;
                if (n2IsTensType) { 
                     steps.push({
                        explanation: `<p><span class="emoji">âœ¨</span> æˆ‘ä»¬æ¥ç®— ${num1} - ${num2}ï¼</p><p><span class="emoji">ğŸ‘‡</span> å…ˆçœ‹ä¸ªä½ï¼š${n1OnesVal} - 0 = ${n1OnesVal}ã€‚æŠŠ ${n1OnesVal} å†™åœ¨ç»“æœçš„ä¸ªä½ä¸Šã€‚</p>`,
                        action: () => { vfResultOnes.textContent = n1OnesVal; vfNum1Ones.style.color = '#ff6b6b'; vfNum2Ones.style.color = '#ff6b6b';}
                    });
                    steps.push({
                        explanation: `<p><span class="emoji">ğŸ‘‰</span> å†çœ‹åä½ï¼š${n1TensVal}ä¸ªå - ${n2TensVal}ä¸ªå = ${n1TensVal - n2TensVal}ä¸ªåã€‚æŠŠ ${n1TensVal - n2TensVal} å†™åœ¨ç»“æœçš„åä½ä¸Šã€‚</p>`,
                        action: () => { vfResultTens.textContent = n1TensVal - n2TensVal; vfNum1Tens.style.color = '#ff6b6b'; vfNum2Tens.style.color = '#ff6b6b';}
                    });
                } else { 
                    steps.push({
                        explanation: `<p><span class="emoji">âœ¨</span> æˆ‘ä»¬æ¥ç®— ${num1} - ${num2}ï¼</p><p><span class="emoji">ğŸ‘‡</span> å…ˆä»ä¸ªä½å¼€å§‹å‡ï¼š${n1OnesVal} å‡ ${n2OnesVal}ã€‚</p>`,
                         action: () => { vfNum1Ones.style.color = '#ff6b6b'; vfNum2Ones.style.color = '#ff6b6b'; }
                    });
                    if (n1OnesVal < n2OnesVal) { 
                        steps.push({
                            explanation: `<p><span class="emoji">ğŸ˜®</span> å“å‘€ï¼ä¸ªä½ ${n1OnesVal} ä¸å¤Ÿå‡ ${n2OnesVal} å‘¢ï¼</p><p><span class="emoji">â¡ï¸</span> æ²¡å…³ç³»ï¼Œæˆ‘ä»¬å‘åä½å¤§å“¥ ${n1TensVal} å€Ÿä¸ª <span style="color:#ff6b6b; font-weight:bold;">1</span> (ä»£è¡¨1ä¸ªå)ï¼</p>`,
                            action: () => {
                                vfNum1Tens.classList.add('strikethrough');
                                tempTensDisplay.textContent = n1TensVal - 1; 
                                tempTensDisplay.style.opacity = 1;

                                vfNum1Ones.classList.add('strikethrough');
                                tempOnesDisplay.textContent = 10 + n1OnesVal;
                                tempOnesDisplay.style.opacity = 1;
                            }
                        });
                         steps.push({
                            explanation: `<p><span class="emoji">ğŸ’ª</span> åä½ ${n1TensVal} å˜æˆäº† ${n1TensVal-1}ï¼Œä¸ªä½ ${n1OnesVal} å˜æˆäº† ${10+n1OnesVal} (çœ‹æ•°å­—ä¸Šé¢çš„å°æ ‡è®°)ã€‚</p><p><span class="emoji">ğŸ‘</span> ç°åœ¨ä¸ªä½å¯ä»¥å‡å•¦ï¼š${10+n1OnesVal} - ${n2OnesVal} = ${10+n1OnesVal-n2OnesVal}ã€‚æŠŠç»“æœå†™åœ¨ä¸ªä½ä¸Šã€‚</p>`,
                            action: () => {
                                vfResultOnes.textContent = 10 + n1OnesVal - n2OnesVal;
                                tempTensDisplay.style.opacity = 0.5; 
                                tempOnesDisplay.style.opacity = 0.5; 
                            }
                        });
                        steps.push({
                            explanation: `<p><span class="emoji">ğŸ‘€</span> åä½è¿˜å‰©ä¸‹ ${n1TensVal-1}ä¸ªåã€‚æŠŠ ${n1TensVal-1} å†™åœ¨ç»“æœçš„åä½ä¸Šã€‚</p>`,
                            action: () => {
                                vfResultTens.textContent = n1TensVal - 1;
                                // é«˜äº®é€€ä½åçš„åä½ï¼Œéœ€è¦ç¡®ä¿tempTensDisplayé‡Œçš„å€¼æ˜¯æ­£ç¡®çš„
                                // è¿™é‡Œçš„ tempTensDisplay.style.color ä¼¼ä¹åº”è¯¥ä½œç”¨åœ¨ vfResultTens æˆ–è€…åŸå§‹çš„ vfNum1Tens (å¦‚æœå®ƒæ˜¾ç¤ºçš„æ˜¯é€€ä½åçš„å€¼)
                                // æš‚æ—¶ä¿æŒç°çŠ¶ï¼Œæˆ–è€…å¯ä»¥é«˜äº® tempTensDisplay æœ¬èº«
                                if(tempTensDisplay.textContent !== ''){ // ç¡®ä¿æœ‰å€¼æ‰é«˜äº®
                                     tempTensDisplay.style.color = '#ff6b6b';
                                }
                            }
                        });

                    } else { 
                        steps.push({
                            explanation: `<p><span class="emoji">ğŸ˜Š</span> ä¸ªä½ ${n1OnesVal} å¤Ÿå‡ ${n2OnesVal}ï¼Œå¤ªæ£’äº†ï¼ ${n1OnesVal} - ${n2OnesVal} = ${n1OnesVal-n2OnesVal}ã€‚æŠŠç»“æœå†™åœ¨ä¸ªä½ä¸Šã€‚</p>`,
                             action: () => { vfResultOnes.textContent = n1OnesVal - n2OnesVal; }
                        });
                        steps.push({
                            explanation: `<p><span class="emoji">â¡ï¸</span> åä½æ²¡æœ‰å˜åŒ–ï¼Œè¿˜æ˜¯ ${n1TensVal}ä¸ªåã€‚æŠŠ ${n1TensVal} å†™åœ¨ç»“æœçš„åä½ä¸Šã€‚</p>`,
                            action: () => { vfResultTens.textContent = n1TensVal; vfNum1Tens.style.color = '#ff6b6b'; }
                        });
                    }
                }
            }

            if (steps.length > 0) {
                currentStep = 0; 
                displayNextStep(); 
                startButton.style.display = 'none';
                nextStepButton.textContent = "ä¸‹ä¸€æ­¥ â¡ï¸"; 
                nextStepButton.style.display = 'inline-block';
                restartButton.style.display = 'none'; 
                num1Input.disabled = true; 
                operatorSelect.disabled = true;
                num2Input.disabled = true;
            }
        }
        resetCalculation();

    </script>
</body>
</html>
